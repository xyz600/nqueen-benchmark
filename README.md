# nqueen-benchmark

compare gpu & cpu n-queen performance

## 基本実装

* 枝刈りありの backtrack
* 1 step で 1行ずつ埋めていく
* 縦方向と斜め2方向に関して、bitmap を使って利きを判定
    * `n <= 32` を前提にするなら、多くても 64 bit の bitmap があれば十分

## CPU implementation

* ver1
  * 単純な実装  
* ver2
  * Open MP による並列化  
* ver3
  * 深さ2まで展開して、並列度を調整  
* ver4
  * 最内ループを SIMD 4並列
* ver5
  * 探索の初手重複除去  
* ver6
  * Somer's algorithm (wrong)
* ver7
  * GPU implementation
* ver8
  * GPU Somer's algorithm (correct)
* ver9
  * CPU マルチスレッド化
* ver10 (GPU latest)
  * GPU の重複除去
* ver11 (CPU latest)
  * CPU Somer's algorithm (correct)

## 結果[ms]

| #pat       | N   | ver1 | ver2  | ver3  | ver4  | ver5  | ver6  | ver 7 | ver 8 | ver9 | ver10 | ver11 |
| ---------- | --- | ---- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ---- | ----- | ----- |
| 92         | 8   | 0    | 13    | 8     | 3     | 12    | 7     | 116   | 103   | 62   | 59    | 11    |
| 352        | 9   | 0    | 1     | 0     | 13    | 8     | 9     | 32    | 22    | 2    | 2     | 0     |
| 724        | 10  | 2    | 2     | 0     | 2     | 3     | 7     | 32    | 22    | 1    | 1     | 0     |
| 2680       | 11  | 10   | 1     | 0     | 4     | 0     | 0     | 32    | 22    | 3    | 2     | 0     |
| 14200      | 12  | 34   | 3     | 4     | 1     | 0     | 0     | 32    | 22    | 5    | 5     | 0     |
| 73712      | 13  | 193  | 19    | 21    | 9     | 5     | 1     | 33    | 22    | 16   | 15    | 2     |
| 365596     | 14  | 1162 | 119   | 80    | 67    | 29    | 7     | 45    | 25    | 10   | 12    | 10    |
| 2279184    | 15  | 7451 | 689   | 557   | 366   | 202   | 55    | 129   | 54    | 26   | 24    | 33    |
| 14772512   | 16  | -    | 4405  | 3686  | 2155  | 1039  | 302   | 602   | 213   | 125  | 79    | 232   |
| 95815104   | 17  | -    | 29532 | 24117 | 18434 | 10245 | 2162  | 3881  | 1461  | 674  | 456   | 1643  |
| 666090624  | 18  | -    | -     | -     | -     | -     | 15324 | 28581 | 12111 | 4935 | 2963  | 11603 |
| 4968057848 | 19  | -    | -     | -     | -     | -     | -     | -     | -     | -    | 26814 | -     |