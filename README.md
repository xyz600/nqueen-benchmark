# nqueen-benchmark

compare gpu & cpu n-queen performance

## 基本実装

* 枝刈りありの backtrack
* 1 step で 1行ずつ埋めていく
* 縦方向と斜め2方向に関して、bitmap を使って利きを判定
    * `n <= 32` を前提にするなら、多くても 64 bit の bitmap があれば十分

## CPU implementation

* ver1
  * 単純な実装  
* ver2
  * Open MP による並列化  
* ver3
  * 深さ2まで展開して、並列度を調整  
* ver4
  * 最内ループを SIMD 4並列
* ver5
  * 探索の初手重複除去  
* ver6
  * Somer's algorithm  
* ver7
  * GPU implementation

## 結果[ms]

| #pat      | N   | ver1 | ver2  | ver3  | ver4  | ver5  | ver6  | ver 7 |
| --------- | --- | ---- | ----- | ----- | ----- | ----- | ----- | ----- |
| 92        | 8   | 0    | 13    | 8     | 3     | 12    | 7     | 116   |
| 352       | 9   | 0    | 1     | 0     | 13    | 8     | 9     | 32    |
| 724       | 10  | 2    | 2     | 0     | 2     | 3     | 7     | 32    |
| 2680      | 11  | 10   | 1     | 0     | 4     | 0     | 0     | 32    |
| 14200     | 12  | 34   | 3     | 4     | 1     | 0     | 0     | 32    |
| 73712     | 13  | 193  | 19    | 21    | 9     | 5     | 1     | 33    |
| 365596    | 14  | 1162 | 119   | 80    | 67    | 29    | 7     | 45    |
| 2279184   | 15  | 7451 | 689   | 557   | 366   | 202   | 55    | 109   |
| 14772512  | 16  | -    | 4405  | 3686  | 2155  | 1039  | 302   | 484   |
| 95815104  | 17  | -    | 29532 | 24117 | 18434 | 10245 | 2162  | 3165  |
| 666090624 | 18  | -    | -     | -     | -     | -     | 15324 | 23808 |